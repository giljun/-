# SQLD_JOIN

- 두 개 이상의 테이블들을 연결 또는 결합하여 데이터를 출력하는 것을 JOIN이라고 한다.
- 관계형 데이터베이스의 가장 큰 장점이면서 대표적인 핵심 기능이라고 한다.
- 일반적인 경우 행들을 PK, FK 값의 연관에 의해 JOIN이 성립된다.
  - 어떤 경우에는 이러한 PK, FK의 관계가 없어도 논리적인 값들의 연관만으로 JOIN이 성립 가능하다.
- 하나의 SQL 문장에서 선수, 팀, 운동장 등 여러 테이블을 조인해서 사용할 수도 있다.
- 다만 한 가지 주의할 점은 FROM 절에 여러 테이블이 나열되더라도 SQL에서 데이터를 처리할 때는 단 두 개의 집합에만 조인이 일어난다는 것이다.
- FROM 절에 A, B, C 테이블이 나열되었더라도 특정 2개의 테이블만 먼저 조인처리되고, 2개 테이블이 조인되어서 처리된 새로운 데이터 집합과 남은 한 개의 테이블이 다음 차례로 조인되는 것이다.



## EQUI JOIN

- EQUI JOIN은 두 개의 테이블 간에 칼럼 값들이 서로 정확하게 일치하는 경우에 사용되는 방법

- 대부분 PK, FK의 관계를 기반으로 한다.

- WHERE 절에 기술하게 되는데 "=" 연산자를 사용해서 표현

  ```sql
  SELECT PLAYER.PLAYER_NAME 선수명, TEAM.TEAM_NAME 소속명
  FROM PLAYER, TEAM
  WHERE PLAYER.TEAM_ID = TEAM.TEAM_ID;
  ```

- N개의 테이블로부터 필요한 데이터를 조회하기 위해 필요한 JOIN 조건은 대상 테이블의 개수에서 하나를 뺀 N-1개 이상이 필요하다.

- JOIN 시 주의해야 할 사항

  - 만약 테이블에 대한 ALIAS를 적용해서 SQL 문장을 작성했을 경우, WHERE 절과 SELECT 절에는 테이블명이 아닌 테이블에 대한 ALIAS를 사용해야 한다는 점이다.
    - DBMS의 옵티마이저가 칼럼명이 부적합하다는 에러를 파싱 단계에서 발생시킨다.



## Non EQUI JOIN

- 두 개의 테이블 간에 칼럼 값들이 서로 정확하게 일치하지 않는 경우에 사용된다.
  - "=" 연산자가 아닌 다른 (Between, >, >=, <, <= 등) 연산자들을 사용하여 JOIN을 수행하는 것
- 데이터 모델에 따라서 Non EQUI JOIN이 불가능한 경우도 있다.



## 3개 이상 TABLE JOIN

- 세 개의 테이블에 대한 JOIN이므로 WHERE 절에 2개 이상의 JOIN 조건이 필요하다.
- JOIN이 필요한 기본적인 이유는 과목1에서 배운 정규화에서부터 출발한다.
  - 정규화란 불필요한 데이터의 정합성을 확보하고 이상현상 발생을 피하기 위해, 테이블을 분할하여 생성하는 것
  - 데이터웨어하우스 모델처럼 하나의 테이블에 모든 데이터를 집중시켜놓고 그 테이블로부터 필요한 데이터를 조회할 수도 있다. 그러나, 이렇게 됐을 경우, 가장 중요한 데이터의 정합성에 더 큰 비용을 지불해야 하며, 데이터를 추가, 삭제, 수정하는 작업 역시 상당한 노력이 요구 될 것
  - 성능 측면에서도 간단한 데이터를 조회하는 경우에도 규모가 큰 테이블에서 필요한 데이터를 찾아야 하기 때문에 오히려 검색 속도가 떨어질 수도 있다.
  - 이러한 방법을 정규화하여 데이터를 분할하게 되면 해결 가능하다.
  - 다만, JOIN을 잘못 기술하게 되면 시스템 자원 부족이나 과다한 응답시간 지연을 발생시키는 중요 요인이 되므로 JOIN 조건은 신중하게 작성







