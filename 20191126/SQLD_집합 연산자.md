# SQLD_집합 연산자

- 집합 연산자(SET_OPERATOR)
  - 연관된 데이터를 조회하는 방법 중 하나
  - 여러 개의 질의의 결과를 연결하여 하나로 결합하는 방식 사용
    - 즉, 집합 연산자는 2개 이상의 질의 결과를 하나의 결과로 만들어 준다.



### 일반적으로 집합 연산자를 사용하는 상황

- 서로 다른 테이블에서 유사한 형태의 결과를 반환하는 것을 하나의 결과로 합치고자 할 때 사용
- 동일 테이블에서 서로 다른 질의를 수행하여 결과를 합치고자 할 때 사용
- 이외에도 튜닝관점에서 실행계획을 분리하고자 하는 목적으로도 사용



### 집합 연산자를 사용하기 위한 제약조건 (조건을 지키지 않을 시 데이터베이스가 오류 반환)

- SELECT 절의 칼럼 수가 동일

- SELECT 절의 동일 위치에 존재하는 칼럼의 데이터 타입이 상위 호환 가능

  | 집합 연산자 |                        연산자의 의미                         |
  | :---------: | :----------------------------------------------------------: |
  |    UNION    | 여러 개의 SQL문의 결과에 대한 합집합으로 결과에서 모든 중복된 행은 하나의 행으로 만든다. |
  |  UNION ALL  | 여러 개의 SQL문의 결과에 대한 합집합으로 중복된 행도 그대로 결과로 표시된다. 즉, 단순한 결과만 합쳐놓은 것이다. 일반적으로 여러 질의 결과가 상호배타적인일 때, 많이 사용한다. 개별 SQL문의 결과가 서로 중복되지 않는 경우, UNION과 결과가 동일하다 |
  |  INTERSECT  | 여러 개의 SQL문의 결과에 대한 교집합이다. 중복된 행은 하나의 행으로 만든다. |
  |   EXCEPT    | 앞의 SQL문의 결과에서 뒤의 SQL문의 결과에 대한 차집합이다. 중복된 행은 하나의 행으로 만든다 - 일부 데이터베이스는 MINUS를 사용한다. |



- 집합 연산자는 사용상의 제약조건을 만족한다면 어떤 형태의 SELECT문이라도 이용가능
- 집합 연산자는 여러 개의 SELECT문을 연결하는 것에 지나지 않음
- ORDER BY는 집합 연산을 적용한 최종 결과에 대한 정렬 처리이므로 가장 마지막 줄에 한번만 기술







